(this["webpackJsonpmy-react-app"]=this["webpackJsonpmy-react-app"]||[]).push([[0],{27:function(e,t,n){},28:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(10),r=n.n(s),o=n(8),i=n(3),j=n(29),d=n(4);var l=()=>{const[e,t]=Object(a.useState)(!1),[n,c]=Object(a.useState)(null),s=Object(i.p)();Object(a.useEffect)((()=>{(async()=>{try{const e=await j.a.get("/api/check_login/");t(e.data.is_logged_in)}catch(e){console.error("\ub85c\uadf8\uc778 \uc0c1\ud0dc \ud655\uc778 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)}})(),(async()=>{try{const e=await j.a.get("/api/csrf_token/");c(e.data.csrfToken)}catch(e){console.error("CSRF \ud1a0\ud070\uc744 \uac00\uc838\uc624\ub294 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)}})()}),[]);return Object(d.jsxs)("div",{children:[Object(d.jsx)("h1",{children:"Welcome to the Main Page"}),e?Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("button",{onClick:async()=>{try{await j.a.post("/api/logout/",{},{headers:{"X-CSRFToken":n||""}}),t(!1),s("/login")}catch(e){console.error("\ub85c\uadf8\uc544\uc6c3 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)}},children:"Logout"})}):Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("button",{onClick:()=>s("/login"),children:"Login"}),Object(d.jsx)("button",{onClick:()=>s("/register"),children:"Register"})]})]})},b=n(6);var h=()=>{const[e,t]=Object(a.useState)({id:"",password:"",name:"",age:"",address:"",detailed_address:"",phone_num:"",guard_name:"",guard_phone_num:""}),[n,c]=Object(a.useState)(""),s=Object(i.p)();Object(a.useEffect)((()=>{(async()=>{const e=await fetch("/api/csrf_token/"),t=await e.json();c(t.csrfToken)})()}),[]);const r=n=>{t(Object(b.a)(Object(b.a)({},e),{},{[n.target.name]:n.target.value}))};return Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{onClick:()=>s(-1),children:"Back"})," ",Object(d.jsx)("h1",{children:"Register"}),Object(d.jsxs)("form",{onSubmit:async t=>{t.preventDefault();const a=await fetch("/api/signup/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":n},body:JSON.stringify(e)}),c=await a.json();a.ok?(alert(c.message),s("/login")):alert(c.message)},children:[Object(d.jsx)("input",{type:"text",name:"id",placeholder:"ID",onChange:r,required:!0}),Object(d.jsx)("input",{type:"password",name:"password",placeholder:"Password",onChange:r,required:!0}),Object(d.jsx)("input",{type:"text",name:"name",placeholder:"Name",onChange:r,required:!0}),Object(d.jsx)("input",{type:"number",name:"age",placeholder:"Age",onChange:r,required:!0}),Object(d.jsx)("input",{type:"text",name:"address",placeholder:"Address",onChange:r,required:!0}),Object(d.jsx)("input",{type:"text",name:"detailed_address",placeholder:"Detailed Address",onChange:r}),Object(d.jsx)("input",{type:"text",name:"phone_num",placeholder:"Phone Number",onChange:r,required:!0}),Object(d.jsx)("input",{type:"text",name:"guard_name",placeholder:"Guard Name",onChange:r}),Object(d.jsx)("input",{type:"text",name:"guard_phone_num",placeholder:"Guard Phone Number",onChange:r}),Object(d.jsx)("button",{type:"submit",children:"Register"})]})]})};var p=()=>{const[e,t]=Object(a.useState)(null),[n,c]=Object(a.useState)(""),[s,r]=Object(a.useState)(""),o=Object(i.p)();Object(a.useEffect)((()=>{(async()=>{try{const e=await j.a.get("/api/csrf_token/");t(e.data.csrfToken)}catch(e){console.error("CSRF \ud1a0\ud070\uc744 \uac00\uc838\uc624\ub294 \uc911 \uc624\ub958 \ubc1c\uc0dd:",e)}})()}),[]);return Object(d.jsxs)("div",{children:[Object(d.jsx)("button",{onClick:()=>o(-1),children:"Back"})," ",Object(d.jsx)("h1",{children:"Login"}),Object(d.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=await j.a.post("/api/login/",{id:n,password:s},{headers:{"X-CSRFToken":e||""}});console.log("\ub85c\uadf8\uc778 \uc131\uacf5:",t.data),window.location.href="/"}catch(a){console.error("\ub85c\uadf8\uc778 \uc911 \uc624\ub958 \ubc1c\uc0dd:",a)}},children:[Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{children:"ID:"}),Object(d.jsx)("input",{type:"text",value:n,onChange:e=>c(e.target.value)})]}),Object(d.jsxs)("div",{children:[Object(d.jsx)("label",{children:"Password:"}),Object(d.jsx)("input",{type:"password",value:s,onChange:e=>r(e.target.value)})]}),Object(d.jsx)("button",{type:"submit",children:"Login"})]})]})};var u=()=>Object(d.jsx)(o.a,{children:Object(d.jsxs)(i.c,{children:[Object(d.jsx)(i.a,{path:"/",element:Object(d.jsx)(l,{})}),Object(d.jsx)(i.a,{path:"/register",element:Object(d.jsx)(h,{})}),Object(d.jsx)(i.a,{path:"/login",element:Object(d.jsx)(p,{})})]})});n(27);r.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(u,{})}),document.getElementById("root"))}},[[28,1,2]]]);
//# sourceMappingURL=main.58a8590f.chunk.js.map