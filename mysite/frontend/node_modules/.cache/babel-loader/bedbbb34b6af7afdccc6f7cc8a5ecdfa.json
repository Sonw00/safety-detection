{"ast":null,"code":"import _objectSpread from\"/home/azureuser/Desktop/son/safety-detection/mysite/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Register=()=>{const[formData,setFormData]=useState({id:'',password:'',name:'',age:'',address:'',detailed_address:'',phone_num:'',guard_name:'',guard_phone_num:''});const[csrfToken,setCsrfToken]=useState('');const navigate=useNavigate();useEffect(()=>{const fetchCsrfToken=async()=>{const response=await fetch('/api/csrf_token/');const data=await response.json();setCsrfToken(data.csrfToken);};fetchCsrfToken();},[]);const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();const response=await fetch('/api/signup/',{method:'POST',headers:{'Content-Type':'application/json','X-CSRFToken':csrfToken},body:JSON.stringify(formData)});const data=await response.json();if(response.ok){alert(data.message);navigate('/login');// 회원가입이 완료되면 로그인 페이지로 이동\n}else{alert(data.message);}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(-1),children:\"Back\"}),\" \",/*#__PURE__*/_jsx(\"h1\",{children:\"Register\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"id\",placeholder:\"ID\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",placeholder:\"Password\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",placeholder:\"Name\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"age\",placeholder:\"Age\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",placeholder:\"Address\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"detailed_address\",placeholder:\"Detailed Address\",onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"phone_num\",placeholder:\"Phone Number\",onChange:handleChange,required:true}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"guard_name\",placeholder:\"Guard Name\",onChange:handleChange}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"guard_phone_num\",placeholder:\"Guard Phone Number\",onChange:handleChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Register\"})]})]});};export default Register;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","jsx","_jsx","jsxs","_jsxs","Register","formData","setFormData","id","password","name","age","address","detailed_address","phone_num","guard_name","guard_phone_num","csrfToken","setCsrfToken","navigate","fetchCsrfToken","response","fetch","data","json","handleChange","e","_objectSpread","target","value","handleSubmit","preventDefault","method","headers","body","JSON","stringify","ok","alert","message","children","onClick","onSubmit","type","placeholder","onChange","required"],"sources":["/home/azureuser/Desktop/son/safety-detection/mysite/frontend/src/components/Register.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\n\nconst Register = () => {\n  const [formData, setFormData] = useState({\n    id: '',\n    password: '',\n    name: '',\n    age: '',\n    address: '',\n    detailed_address: '',\n    phone_num: '',\n    guard_name: '',\n    guard_phone_num: ''\n  });\n  const [csrfToken, setCsrfToken] = useState('');\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchCsrfToken = async () => {\n      const response = await fetch('/api/csrf_token/');\n      const data = await response.json();\n      setCsrfToken(data.csrfToken);\n    };\n    fetchCsrfToken();\n  }, []);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    const response = await fetch('/api/signup/', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n        'X-CSRFToken': csrfToken\n      },\n      body: JSON.stringify(formData)\n    });\n    const data = await response.json();\n    if (response.ok) {\n      alert(data.message);\n      navigate('/login'); // 회원가입이 완료되면 로그인 페이지로 이동\n    } else {\n      alert(data.message);\n    }\n  };\n\n  return (\n    <div>\n      <button onClick={() => navigate(-1)}>Back</button> {/* 뒤로가기 버튼 */}\n      <h1>Register</h1>\n      <form onSubmit={handleSubmit}>\n        <input type=\"text\" name=\"id\" placeholder=\"ID\" onChange={handleChange} required />\n        <input type=\"password\" name=\"password\" placeholder=\"Password\" onChange={handleChange} required />\n        <input type=\"text\" name=\"name\" placeholder=\"Name\" onChange={handleChange} required />\n        <input type=\"number\" name=\"age\" placeholder=\"Age\" onChange={handleChange} required />\n        <input type=\"text\" name=\"address\" placeholder=\"Address\" onChange={handleChange} required />\n        <input type=\"text\" name=\"detailed_address\" placeholder=\"Detailed Address\" onChange={handleChange} />\n        <input type=\"text\" name=\"phone_num\" placeholder=\"Phone Number\" onChange={handleChange} required />\n        <input type=\"text\" name=\"guard_name\" placeholder=\"Guard Name\" onChange={handleChange} />\n        <input type=\"text\" name=\"guard_phone_num\" placeholder=\"Guard Phone Number\" onChange={handleChange} />\n        <button type=\"submit\">Register</button>\n      </form>\n    </div>\n  );\n};\n\nexport default Register;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}