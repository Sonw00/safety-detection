{"ast":null,"code":"import _objectSpread from\"/home/azureuser/Desktop/son/safety-detection/mysite/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Register=()=>{const[csrfToken,setCsrfToken]=useState(null);const[formData,setFormData]=useState({id:'',password:'',name:'',age:'',address:'',detailed_address:'',phone_num:'',guard_name:'',guard_phone_num:''});const[errors,setErrors]=useState([]);const navigate=useNavigate();useEffect(()=>{const fetchCsrfToken=async()=>{const response=await axios.get('/api/csrf_token/');setCsrfToken(response.data.csrfToken);};fetchCsrfToken();},[]);const handleChange=e=>{setFormData(_objectSpread(_objectSpread({},formData),{},{[e.target.name]:e.target.value}));};const handleSubmit=async e=>{e.preventDefault();setErrors([]);try{const response=await axios.post('/api/signup/',formData,{headers:{'Content-Type':'application/json','X-CSRFToken':csrfToken||''}});console.log('회원가입 성공:',response.data);navigate('/login');}catch(error){if(error.response&&error.response.data){setErrors([error.response.data.message]);}else{setErrors(['회원가입 중 오류가 발생했습니다.']);}}};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"\\uD68C\\uC6D0\\uAC00\\uC785\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"ID:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"id\",value:formData.id,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",value:formData.password,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:formData.name,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Age:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"age\",value:formData.age,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Address:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"address\",value:formData.address,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Detailed Address:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"detailed_address\",value:formData.detailed_address,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Phone Number:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"phone_num\",value:formData.phone_num,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Guard Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"guard_name\",value:formData.guard_name,onChange:handleChange})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Guard Phone Number:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"guard_phone_num\",value:formData.guard_phone_num,onChange:handleChange})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Register\"})]}),errors.length>0&&/*#__PURE__*/_jsx(\"div\",{style:{color:'red'},children:errors.map((error,index)=>/*#__PURE__*/_jsx(\"p\",{children:error},index))})]});};export default Register;","map":{"version":3,"names":["React","useState","useEffect","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Register","csrfToken","setCsrfToken","formData","setFormData","id","password","name","age","address","detailed_address","phone_num","guard_name","guard_phone_num","errors","setErrors","navigate","fetchCsrfToken","response","get","data","handleChange","e","_objectSpread","target","value","handleSubmit","preventDefault","post","headers","console","log","error","message","children","onSubmit","type","onChange","length","style","color","map","index"],"sources":["/home/azureuser/Desktop/son/safety-detection/mysite/frontend/src/components/Register.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport axios from 'axios';\n\nconst Register = () => {\n  const [csrfToken, setCsrfToken] = useState<string | null>(null);\n  const [formData, setFormData] = useState({\n    id: '',\n    password: '',\n    name: '',\n    age: '',\n    address: '',\n    detailed_address: '',\n    phone_num: '',\n    guard_name: '',\n    guard_phone_num: ''\n  });\n  const [errors, setErrors] = useState<string[]>([]);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchCsrfToken = async () => {\n      const response = await axios.get('/api/csrf_token/');\n      setCsrfToken(response.data.csrfToken);\n    };\n    fetchCsrfToken();\n  }, []);\n\n  const handleChange = (e: React.ChangeEvent<HTMLInputElement>) => {\n    setFormData({\n      ...formData,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setErrors([]);\n    try {\n      const response = await axios.post('/api/signup/', formData, {\n        headers: {\n          'Content-Type': 'application/json',\n          'X-CSRFToken': csrfToken || ''\n        }\n      });\n      console.log('회원가입 성공:', response.data);\n      navigate('/login');\n    } catch (error) {\n      if (error.response && error.response.data) {\n        setErrors([error.response.data.message]);\n      } else {\n        setErrors(['회원가입 중 오류가 발생했습니다.']);\n      }\n    }\n  };\n\n  return (\n    <div>\n      <h1>회원가입</h1>\n      <form onSubmit={handleSubmit}>\n        <div>\n          <label>ID:</label>\n          <input type=\"text\" name=\"id\" value={formData.id} onChange={handleChange} />\n        </div>\n        <div>\n          <label>Password:</label>\n          <input type=\"password\" name=\"password\" value={formData.password} onChange={handleChange} />\n        </div>\n        <div>\n          <label>Name:</label>\n          <input type=\"text\" name=\"name\" value={formData.name} onChange={handleChange} />\n        </div>\n        <div>\n          <label>Age:</label>\n          <input type=\"text\" name=\"age\" value={formData.age} onChange={handleChange} />\n        </div>\n        <div>\n          <label>Address:</label>\n          <input type=\"text\" name=\"address\" value={formData.address} onChange={handleChange} />\n        </div>\n        <div>\n          <label>Detailed Address:</label>\n          <input type=\"text\" name=\"detailed_address\" value={formData.detailed_address} onChange={handleChange} />\n        </div>\n        <div>\n          <label>Phone Number:</label>\n          <input type=\"text\" name=\"phone_num\" value={formData.phone_num} onChange={handleChange} />\n        </div>\n        <div>\n          <label>Guard Name:</label>\n          <input type=\"text\" name=\"guard_name\" value={formData.guard_name} onChange={handleChange} />\n        </div>\n        <div>\n          <label>Guard Phone Number:</label>\n          <input type=\"text\" name=\"guard_phone_num\" value={formData.guard_phone_num} onChange={handleChange} />\n        </div>\n        <button type=\"submit\">Register</button>\n      </form>\n      {errors.length > 0 && (\n        <div style={{ color: 'red' }}>\n          {errors.map((error, index) => (\n            <p key={index}>{error}</p>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Register;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}